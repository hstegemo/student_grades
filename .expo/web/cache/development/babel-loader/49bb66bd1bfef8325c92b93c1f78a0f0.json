{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { useState, useEffect, useRef } from 'react';\nimport { useNavigation } from '@react-navigation/native';\nimport { db } from \"../firebaseConfig\";\nimport { deleteDoc, doc, getDoc, getDocs, collection, setDoc } from 'firebase/firestore';\nimport { DataTable } from 'react-native-paper';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar EditStudent = function EditStudent(_ref) {\n  var route = _ref.route;\n  var usersCollectionRef = collection(db, \"Students\");\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      fName = _useState4[0],\n      setFName = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      lName = _useState6[0],\n      setLName = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      DOB = _useState8[0],\n      setDOB = _useState8[1];\n\n  var _useState9 = useState(''),\n      _useState10 = _slicedToArray(_useState9, 2),\n      MGMT329Score = _useState10[0],\n      setMGMT329Score = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      MGMT329Grade = _useState12[0],\n      setMGMT329Grade = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      MGMT450Score = _useState14[0],\n      setMGMT450Score = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      MGMT450Grade = _useState16[0],\n      setMGMT450Grade = _useState16[1];\n\n  var _useState17 = useState([]),\n      _useState18 = _slicedToArray(_useState17, 2),\n      taskItems = _useState18[0],\n      setTaskItems = _useState18[1];\n\n  var _useState19 = useState([]),\n      _useState20 = _slicedToArray(_useState19, 2),\n      students = _useState20[0],\n      setStudents = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      myStudent = _useState22[0],\n      setMyStudent = _useState22[1];\n\n  var studentid = route.params.paramKey;\n  console.log(\"is this undefined?\" + route.params.paramKey);\n  var navigation = useNavigation();\n\n  var HomeScreenRedir = function HomeScreenRedir() {\n    navigation.replace(\"Home\");\n  };\n\n  useEffect(function () {\n    var getStudents = function getStudents() {\n      var data, studentRef;\n      return _regeneratorRuntime.async(function getStudents$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(getDocs(usersCollectionRef));\n\n            case 2:\n              data = _context.sent;\n              setStudents(data.docs.map(function (doc) {\n                return _objectSpread(_objectSpread({}, doc.data()), {}, {\n                  id: doc.id\n                });\n              }));\n              studentRef = doc(db, \"Students\", studentid);\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    getStudents();\n    readStudent();\n  }, []);\n\n  function readStudent() {\n    getDocs(collection(db, \"Students\")).then(function (notesSnapshot) {\n      var notesList = [];\n\n      for (var i = 0; i < notesSnapshot.docs.length; i++) {\n        var _doc = notesSnapshot.docs[i];\n\n        var object = _doc.data();\n\n        object.id = _doc.id;\n        notesList.push(object);\n\n        if (object.id == studentid) {\n          console.log(\"Found \" + object.id);\n          setMyStudent(object);\n          setFName(object.fName);\n          setLName(object.lName);\n          setDOB(object.DOB);\n          setMGMT329Score(object.MGMT329Score);\n          setMGMT450Score(object.MGMT450Score);\n          setMGMT329Grade(object.MGMT329Grade);\n          setMGMT450Grade(object.MGMT450Grade);\n        }\n      }\n\n      setTaskItems(notesList);\n    }, function (error) {\n      alert(error);\n    });\n  }\n\n  var Update = function Update(value, merge) {\n    var myDoc = doc(db, \"Students\", studentid);\n    setDoc(myDoc, value, {\n      merge: merge\n    }).then(function () {\n      alert(\"Updated Successfully!\");\n      setText(\"\");\n    }).catch(function (error) {\n      alert(error.message);\n    });\n  };\n\n  var Delete = function Delete() {\n    var myDoc = doc(db, \"Student\", studentid);\n    deleteDoc(myDoc).then(function () {\n      alert(\"Deleted Successfully!\");\n    }).catch(function (error) {\n      alert(error.message);\n    });\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(TouchableOpacity, {\n      onPress: HomeScreenRedir,\n      style: styles.button,\n      children: _jsx(Text, {\n        styles: styles.buttonText,\n        children: \"Home\"\n      })\n    }), _jsx(View, {\n      children: _jsxs(DataTable, {\n        children: [_jsxs(DataTable.Header, {\n          children: [_jsx(DataTable.Title, {\n            children: \"Last Name\"\n          }), _jsx(DataTable.Title, {\n            children: \"Date of Birth Name\"\n          }), _jsx(DataTable.Title, {\n            children: \"MGMT329 Score\"\n          }), _jsx(DataTable.Title, {\n            children: \"MGMT450 Score\"\n          }), _jsx(DataTable.Title, {\n            children: \"MGMT329 Grade\"\n          }), _jsx(DataTable.Title, {\n            children: \"MGMT450 Grade\"\n          })]\n        }), _jsxs(DataTable.Row, {\n          children: [_jsx(DataTable.Title, {\n            children: \"First Name\"\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(TextInput, {\n              placeholder: \"First Name\",\n              onChangeText: function onChangeText(text) {\n                setFName(text);\n              },\n              value: fName\n            })\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(Button, {\n              title: \"Update\",\n              onPress: function onPress() {\n                Update({\n                  \"fName\": fName\n                }, true);\n              },\n              disabled: fName == \"\"\n            })\n          })]\n        }), _jsxs(DataTable.Row, {\n          children: [_jsx(DataTable.Cell, {\n            children: _jsx(TextInput, {\n              placeholder: \"Last Name\",\n              onChangeText: function onChangeText(text) {\n                setLName(text);\n              },\n              value: lName\n            })\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(Button, {\n              title: \"Update\",\n              onPress: function onPress() {\n                Update({\n                  \"lName\": lName\n                }, true);\n              },\n              disabled: lName == \"\"\n            })\n          })]\n        }), _jsxs(DataTable.Row, {\n          children: [_jsx(DataTable.Cell, {\n            children: _jsx(TextInput, {\n              placeholder: \"Date of Birth\",\n              onChangeText: function onChangeText(text) {\n                setDOB(text);\n              },\n              value: DOB\n            })\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(Button, {\n              title: \"Update\",\n              onPress: function onPress() {\n                Update({\n                  \"DOB\": DOB\n                }, true);\n              },\n              disabled: DOB == \"\"\n            })\n          })]\n        }), _jsxs(DataTable.Row, {\n          children: [_jsx(DataTable.Cell, {\n            children: _jsx(TextInput, {\n              placeholder: \"MGMT329 Score\",\n              onChangeText: function onChangeText(text) {\n                setMGMT329Score(text);\n              },\n              value: MGMT329Score\n            })\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(Button, {\n              title: \"Update\",\n              onPress: function onPress() {\n                Update({\n                  \"MGMT329Score\": MGMT329Score\n                }, true);\n              },\n              disabled: MGMT329Score == \"\"\n            })\n          })]\n        }), _jsxs(DataTable.Row, {\n          children: [_jsx(DataTable.Cell, {\n            children: _jsx(TextInput, {\n              placeholder: \"MGMT329 Grade\",\n              onChangeText: function onChangeText(text) {\n                setMGMT329Grade(text);\n              },\n              value: MGMT329Grade\n            })\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(Button, {\n              title: \"Update\",\n              onPress: function onPress() {\n                Update({\n                  \"MGMT329Grade\": MGMT329Grade\n                }, true);\n              },\n              disabled: MGMT329Grade == \"\"\n            })\n          })]\n        }), _jsxs(DataTable.Row, {\n          children: [_jsx(DataTable.Cell, {\n            children: _jsx(TextInput, {\n              placeholder: \"MGMT450 Score\",\n              onChangeText: function onChangeText(text) {\n                setMGMT450Score(text);\n              },\n              value: MGMT450Score\n            })\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(Button, {\n              title: \"Update\",\n              onPress: function onPress() {\n                Update({\n                  \"MGMT450Score\": MGMT450Score\n                }, true);\n              },\n              disabled: MGMT450Score == \"\"\n            })\n          })]\n        }), _jsxs(DataTable.Row, {\n          children: [_jsx(DataTable.Cell, {\n            children: _jsx(TextInput, {\n              placeholder: \"MGMT450 Grade\",\n              onChangeText: function onChangeText(text) {\n                setMGMT450Grade(text);\n              },\n              value: MGMT450Grade\n            })\n          }), _jsx(DataTable.Cell, {\n            children: _jsx(Button, {\n              title: \"Update\",\n              onPress: function onPress() {\n                Update({\n                  \"MGMT450Score\": MGMT450Grade\n                }, true);\n              },\n              disabled: MGMT450Grade == \"\"\n            })\n          })]\n        })]\n      })\n    })]\n  });\n};\n\nexport default EditStudent;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  button: {\n    backgroundColor: '#0782F9',\n    width: '60%',\n    padding: 15,\n    borderRadius: 10,\n    alignItems: 'center',\n    marginTop: 40\n  },\n  buttonOutline: {\n    backgroundColor: 'white',\n    marginTop: 5,\n    borderColor: '#0782F9',\n    borderWidth: 2\n  },\n  buttonText: {\n    color: 'white',\n    fontWeight: '700',\n    fontSize: 16\n  }\n});","map":{"version":3,"sources":["C:/Users/hsteg/VSCode/ReactNative/assignment2/screens/EditStudent.js"],"names":["useState","useEffect","useRef","useNavigation","db","deleteDoc","doc","getDoc","getDocs","collection","setDoc","DataTable","EditStudent","route","usersCollectionRef","text","setText","fName","setFName","lName","setLName","DOB","setDOB","MGMT329Score","setMGMT329Score","MGMT329Grade","setMGMT329Grade","MGMT450Score","setMGMT450Score","MGMT450Grade","setMGMT450Grade","taskItems","setTaskItems","students","setStudents","myStudent","setMyStudent","studentid","params","paramKey","console","log","navigation","HomeScreenRedir","replace","getStudents","data","docs","map","id","studentRef","readStudent","then","notesSnapshot","notesList","i","length","object","push","error","alert","Update","value","merge","myDoc","catch","message","Delete","styles","container","button","buttonText","StyleSheet","create","flex","justifyContent","alignItems","backgroundColor","width","padding","borderRadius","marginTop","buttonOutline","borderColor","borderWidth","color","fontWeight","fontSize"],"mappings":"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","sourcesContent":["import { Button, StyleSheet, Text, TextInput, View, TouchableOpacity } from 'react-native';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { useNavigation } from '@react-navigation/native'\r\nimport { db } from '../firebaseConfig';\r\nimport { deleteDoc, doc, getDoc, getDocs, collection, setDoc } from 'firebase/firestore';\r\nimport { DataTable } from 'react-native-paper';\r\n\r\nconst EditStudent = ({route}) => {\r\n    // Storing User Data\r\n  const usersCollectionRef = collection(db, \"Students\");\r\n  // Update Text\r\n  const [text, setText] = useState(\"\");\r\n  const [fName, setFName] = useState(\"\");\r\n  const [lName, setLName] = useState(\"\");\r\n  const [DOB, setDOB] = useState(\"\");\r\n  // Classes\r\n  const [MGMT329Score, setMGMT329Score] = useState('');\r\n  const [MGMT329Grade, setMGMT329Grade] = useState('');\r\n  const [MGMT450Score, setMGMT450Score] = useState(\"\");\r\n  const [MGMT450Grade, setMGMT450Grade] = useState(\"\");\r\n\r\n  const [taskItems, setTaskItems] = useState([]);\r\n\r\n  const [students, setStudents] = useState([]);\r\n  const [myStudent, setMyStudent]= useState(\"\");\r\n  const studentid = route.params.paramKey;\r\n  console.log(\"is this undefined?\" + route.params.paramKey);\r\n\r\n  const navigation = useNavigation();\r\n  const HomeScreenRedir = () => {\r\n    navigation.replace(\"Home\");\r\n    }\r\n\r\n \r\n  useEffect(() => {\r\n    const getStudents = async () => {\r\n        const data = await getDocs(usersCollectionRef);\r\n        //console.log(data);\r\n        setStudents(data.docs.map((doc)=> ({ ...doc.data(), id: doc.id }))); // now users are added to the db\r\n        // users are added, but not displayed before I push the refresh button (update is next)\r\n\r\n        const studentRef = doc(db, \"Students\", studentid);        \r\n    }; \r\n    \r\n    getStudents();\r\n    readStudent();\r\n    \r\n    } ,[]);\r\n\r\n    function readStudent(){\r\n    getDocs(collection(db, \"Students\")).then(\r\n        function (notesSnapshot) {\r\n            const notesList = [];\r\n            //alert(JSON.stringify(notesSnapshot.docs[0].data()));\r\n            for (let i = 0; i < notesSnapshot.docs.length; i++) {\r\n            let doc = notesSnapshot.docs[i];\r\n            //alert(JSON.stringify(doc));\r\n    \r\n            let object = doc.data();\r\n            object.id = doc.id;\r\n            //alert(JSON.stringify(object))\r\n            notesList.push(object);\r\n            if(object.id==studentid){\r\n                console.log(\"Found \" + object.id);   \r\n                setMyStudent(object);\r\n                setFName(object.fName);\r\n                setLName(object.lName);\r\n                setDOB(object.DOB);\r\n                setMGMT329Score(object.MGMT329Score);\r\n                setMGMT450Score(object.MGMT450Score);\r\n                setMGMT329Grade(object.MGMT329Grade);\r\n                setMGMT450Grade(object.MGMT450Grade);\r\n            }\r\n            }\r\n            //alert(JSON.stringify(notesList));\r\n            setTaskItems(notesList);\r\n        },\r\n        function (error) {\r\n            alert(error);\r\n        }\r\n        );\r\n          \r\n    }\r\n    \r\n\r\n  const Update = (value, merge) => {\r\n    // MARK: Updating Doc\r\n    const myDoc = doc(db, \"Students\", studentid);\r\n\r\n    // If you set merge true then it will merge with existing doc otherwise it will be a fresh one\r\n    setDoc(myDoc, value, { merge: merge })\r\n      // Handling Promises\r\n      .then(() => {\r\n        // MARK: Success\r\n        alert(\"Updated Successfully!\")\r\n        setText(\"\")\r\n      })\r\n      .catch((error) => {\r\n        // MARK: Failure\r\n        alert(error.message)\r\n      })\r\n  }\r\n\r\n  const Delete = () => {\r\n    // MARK: Deleting Doc\r\n    const myDoc = doc(db, \"Student\", studentid)\r\n\r\n    deleteDoc(myDoc)\r\n      // Handling Promises\r\n      .then(() => {\r\n        // MARK: Success\r\n        alert(\"Deleted Successfully!\")\r\n      })\r\n      .catch((error) => {\r\n        // MARK: Failure\r\n        alert(error.message)\r\n      })\r\n\r\n  }\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n         <TouchableOpacity\r\n                onPress={HomeScreenRedir}\r\n                style={styles.button}>\r\n                <Text styles={styles.buttonText}>Home</Text>\r\n            </TouchableOpacity>\r\n        \r\n      <View>\r\n\t <DataTable>\r\n\t\t\t\t  \r\n          <DataTable.Header>\r\n          <DataTable.Title>Last Name</DataTable.Title>\r\n          <DataTable.Title>Date of Birth Name</DataTable.Title>\r\n          <DataTable.Title>MGMT329 Score</DataTable.Title>\r\n          <DataTable.Title>MGMT450 Score</DataTable.Title>\r\n          <DataTable.Title>MGMT329 Grade</DataTable.Title>\r\n          <DataTable.Title>MGMT450 Grade</DataTable.Title>\r\n\t\t\t\t</DataTable.Header>\r\n   \r\n\t\t\t\t<DataTable.Row>\r\n        <DataTable.Title>First Name</DataTable.Title>\r\n          <DataTable.Cell>\r\n              <TextInput placeholder=\"First Name\" onChangeText={(text) => { setFName(text) }} value={fName}></TextInput>\r\n          </DataTable.Cell>\r\n          <DataTable.Cell>\r\n            <Button title='Update' onPress={() => {\r\n                Update({\r\n                    \"fName\": fName,\r\n                  }, true)\r\n                }} disabled={fName == \"\"}>\r\n            </Button>\r\n          </DataTable.Cell>\r\n            \r\n        </DataTable.Row>\r\n          <DataTable.Row>\r\n          <DataTable.Cell>\r\n              <TextInput placeholder='Last Name' onChangeText={(text) => { setLName(text) }} value={lName}></TextInput>\r\n          </DataTable.Cell>\r\n          <DataTable.Cell>\r\n            <Button title='Update' onPress={() => {\r\n                  Update({\r\n                    \"lName\": lName,\r\n                  }, true)\r\n                }} disabled={lName == \"\"}>\r\n\r\n            </Button>\r\n          </DataTable.Cell>  \r\n         </DataTable.Row>\r\n\r\n        <DataTable.Row>\r\n        <DataTable.Cell>\r\n              <TextInput placeholder='Date of Birth' onChangeText={(text) => { setDOB(text) }} value={DOB}></TextInput>\r\n          </DataTable.Cell>\r\n          <DataTable.Cell>\r\n            <Button title='Update' onPress={() => {\r\n                Update({\r\n                  \"DOB\": DOB\r\n                }, true)\r\n              }} disabled={DOB == \"\"}>\r\n            </Button>\r\n          </DataTable.Cell>\r\n          </DataTable.Row>\r\n\r\n          <DataTable.Row>\r\n          <DataTable.Cell>\r\n              <TextInput placeholder='MGMT329 Score' onChangeText={(text) => { setMGMT329Score(text) }} value={MGMT329Score}></TextInput>\r\n          </DataTable.Cell>\r\n          <DataTable.Cell>\r\n            <Button title='Update' onPress={() => {\r\n                Update({\r\n                  \"MGMT329Score\": MGMT329Score\r\n                }, true)\r\n              }} disabled={MGMT329Score == \"\"}></Button>   \r\n          </DataTable.Cell>\r\n            </DataTable.Row>\r\n\r\n            <DataTable.Row>\r\n            <DataTable.Cell>\r\n              <TextInput placeholder='MGMT329 Grade' onChangeText={(text) => { setMGMT329Grade(text) }} value={MGMT329Grade}></TextInput>\r\n          </DataTable.Cell>\r\n          <DataTable.Cell>\r\n          <Button title='Update' onPress={() => {\r\n              Update({\r\n                \"MGMT329Grade\": MGMT329Grade\r\n              }, true)\r\n            }} disabled={MGMT329Grade == \"\"}>\r\n            </Button>\r\n          </DataTable.Cell>\r\n          </DataTable.Row>\r\n\r\n          <DataTable.Row>\r\n          <DataTable.Cell>\r\n              <TextInput placeholder='MGMT450 Score' onChangeText={(text) => { setMGMT450Score(text) }} value={MGMT450Score}></TextInput>\r\n          </DataTable.Cell>\r\n          <DataTable.Cell>\r\n          <Button title='Update' onPress={() => {\r\n              Update({\r\n                \"MGMT450Score\": MGMT450Score\r\n              }, true)\r\n            }} disabled={MGMT450Score == \"\"}>\r\n            </Button>\r\n          </DataTable.Cell>\r\n          </DataTable.Row>\r\n\r\n          <DataTable.Row>\r\n          <DataTable.Cell>\r\n              <TextInput placeholder='MGMT450 Grade' onChangeText={(text) => { setMGMT450Grade(text) }} value={MGMT450Grade}></TextInput>\r\n          </DataTable.Cell>\r\n          <DataTable.Cell>\r\n          <Button title='Update' onPress={() => {\r\n              Update({\r\n                \"MGMT450Score\": MGMT450Grade\r\n              }, true)\r\n            }} disabled={MGMT450Grade == \"\"}>\r\n            </Button>\r\n          </DataTable.Cell>\r\n          </DataTable.Row>\r\n\r\n\t\t</DataTable>\r\n</View>\r\n\r\n    \r\n      \r\n    </View>\r\n  );\r\n}\r\n    export default EditStudent\r\n\r\nconst styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      justifyContent: 'center',\r\n      alignItems: 'center'\r\n    },\r\n    button: {\r\n      backgroundColor: '#0782F9',\r\n      width: '60%',\r\n      padding: 15,\r\n      borderRadius: 10,\r\n      alignItems: 'center',\r\n      marginTop: 40,\r\n    },\r\n    buttonOutline: {\r\n        backgroundColor: 'white',\r\n        marginTop: 5,\r\n        borderColor: '#0782F9',\r\n        borderWidth: 2,\r\n    },\r\n    buttonText: {\r\n        color: 'white',\r\n        fontWeight: '700',\r\n        fontSize: 16,\r\n    },\r\n  })"]},"metadata":{},"sourceType":"module"}